{"ast":null,"code":"import React,{useContext,useState,useEffect}from\"react\";import personallyLogo from'../images/personally-logo.svg';import{Link}from\"react-router-dom\";import{HashLink}from'react-router-hash-link';import'../styles/Header.css';import{AuthContext}from\"../providers/auth-provider\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const authContext=useContext(AuthContext);const user=authContext===null||authContext===void 0?void 0:authContext.user;const signIn=authContext===null||authContext===void 0?void 0:authContext.signIn;const signOut=authContext===null||authContext===void 0?void 0:authContext.signOut;const[userGreeting,setUserGreeting]=useState(null);const[loginBtnText,setLoginBtnText]=useState(\"Log In\");const[isAdmin,setIsAdmin]=useState(false);useEffect(()=>{updateGreetingAndButtonText(user);fetchAdminStatus();},[user]);const updateGreetingAndButtonText=user=>{if(user){setUserGreeting(\"Hello \".concat(user.firstName));setLoginBtnText(\"Log Out\");}else{setUserGreeting(null);setLoginBtnText(\"Log In\");}};const fetchAdminStatus=()=>{fetch('http://127.0.0.1:4000/admin',{method:'GET',credentials:'include'}).then(response=>{if(response.ok){setIsAdmin(true);}else{setIsAdmin(false);}updateGreetingAndButtonText(user);}).catch(error=>{console.error('Error fetching admin status:',error);});};const handleLoginClick=()=>{console.log(\"handleLoginClick: \",user);if(user){// User is already logged in, so log them out\nsignOut();}else{// User is not logged in, initiate the login process\nsignIn().then(()=>{// Handle successful sign-in\nconsole.log(\"User signed in successfully\");}).catch(error=>{// Handle sign-in error\nconsole.error(\"Error signing in:\",error);});}};return/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"nav\",{className:\"header-nav\",children:[/*#__PURE__*/_jsx(\"img\",{src:personallyLogo,alt:\"Personally Logo\",className:\"icon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"userSpanName\",children:userGreeting}),/*#__PURE__*/_jsxs(\"ul\",{className:\"ul-nav\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"li-nav\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"link-nav\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"li-nav\",children:/*#__PURE__*/_jsx(Link,{to:\"/posts\",className:\"link-nav\",children:\"Posts\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"li-nav\",children:/*#__PURE__*/_jsx(Link,{to:\"/about\",className:\"link-nav\",children:\"About\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"li-nav\",children:/*#__PURE__*/_jsx(Link,{to:\"/contact\",className:\"link-nav\",children:\"Contact\"})}),isAdmin&&/*#__PURE__*/_jsx(\"li\",{className:\"li-nav\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"link-nav\",children:\"Admin\"})})]}),/*#__PURE__*/_jsx(HashLink,{smooth:true,to:\"#subscribe\",className:\"link-nav\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submitBtn\",type:\"button\",children:\"Subscribe\"})}),user?/*#__PURE__*/_jsx(\"button\",{className:\"submitBtn\",type:\"button\",onClick:handleLoginClick,children:loginBtnText}):/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"link-nav\",children:/*#__PURE__*/_jsx(\"button\",{className:\"submitBtn\",type:\"button\",children:loginBtnText})})]})});};export default Header;","map":{"version":3,"names":["React","useContext","useState","useEffect","personallyLogo","Link","HashLink","AuthContext","jsx","_jsx","jsxs","_jsxs","Header","authContext","user","signIn","signOut","userGreeting","setUserGreeting","loginBtnText","setLoginBtnText","isAdmin","setIsAdmin","updateGreetingAndButtonText","fetchAdminStatus","concat","firstName","fetch","method","credentials","then","response","ok","catch","error","console","handleLoginClick","log","children","className","src","alt","to","smooth","type","onClick"],"sources":["C:/Users/Tal/Documents/Programming courses/WebDev/BackEnd/Blog_Final_Project/BlogFrontEnd/src/components/Header.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport personallyLogo from '../images/personally-logo.svg';\r\nimport { Link } from \"react-router-dom\";\r\nimport { HashLink } from 'react-router-hash-link';\r\nimport '../styles/Header.css';\r\nimport { AuthContext } from \"../providers/auth-provider\";\r\n\r\n\r\nconst Header = () => {\r\n  const authContext = useContext(AuthContext);\r\n  const user = authContext?.user;\r\n  const signIn = authContext?.signIn;\r\n  const signOut = authContext?.signOut;\r\n\r\n  const [userGreeting, setUserGreeting] = useState(null);\r\n  const [loginBtnText, setLoginBtnText] = useState(\"Log In\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    updateGreetingAndButtonText(user);\r\n    fetchAdminStatus();\r\n  }, [user])\r\n\r\n\r\n  const updateGreetingAndButtonText = (user) => {\r\n    if (user) {\r\n      setUserGreeting(`Hello ${user.firstName}`);\r\n      setLoginBtnText(\"Log Out\");\r\n    } else {\r\n      setUserGreeting(null);\r\n      setLoginBtnText(\"Log In\");\r\n    }\r\n  };\r\n  const fetchAdminStatus = () => {\r\n    fetch('http://127.0.0.1:4000/admin', {\r\n      method: 'GET',\r\n      credentials: 'include'\r\n    })\r\n        .then(response => {\r\n          if (response.ok) {\r\n            setIsAdmin(true);\r\n          } else {\r\n            setIsAdmin(false);\r\n          }\r\n            updateGreetingAndButtonText(user);\r\n        })\r\n        .catch(error => {\r\n          console.error('Error fetching admin status:', error);\r\n        });\r\n  };\r\n\r\n\r\n    const handleLoginClick = () => {\r\n      console.log(\"handleLoginClick: \", user);\r\n      if (user) {\r\n      // User is already logged in, so log them out\r\n      signOut();\r\n    } else {\r\n      // User is not logged in, initiate the login process\r\n        signIn()\r\n            .then(() => {\r\n              // Handle successful sign-in\r\n              console.log(\"User signed in successfully\");\r\n            })\r\n            .catch((error) => {\r\n              // Handle sign-in error\r\n              console.error(\"Error signing in:\", error);\r\n            });\r\n    }\r\n  };\r\n\r\n  return (\r\n      <header>\r\n        <nav className=\"header-nav\">\r\n          <img src={personallyLogo} alt=\"Personally Logo\" className=\"icon\" />\r\n          <span className=\"userSpanName\">{userGreeting}</span>\r\n          <ul className=\"ul-nav\">\r\n            <li className=\"li-nav\">\r\n              <Link to=\"/\" className=\"link-nav\">Home</Link>\r\n            </li>\r\n            <li className=\"li-nav\">\r\n              <Link to=\"/posts\" className=\"link-nav\">Posts</Link>\r\n            </li>\r\n            <li className=\"li-nav\">\r\n              <Link to=\"/about\" className=\"link-nav\">About</Link>\r\n            </li>\r\n            <li className=\"li-nav\">\r\n              <Link to=\"/contact\" className=\"link-nav\">Contact</Link>\r\n            </li>\r\n            {isAdmin && (\r\n                <li className=\"li-nav\">\r\n                  <Link to=\"/admin\" className=\"link-nav\">Admin</Link>\r\n                </li>\r\n            )}\r\n          </ul>\r\n          <HashLink smooth to=\"#subscribe\" className=\"link-nav\">\r\n            <button className=\"submitBtn\" type=\"button\">Subscribe</button>\r\n          </HashLink>\r\n          {/* Conditionally render Login button based on user existence */}\r\n          {user ? (\r\n              <button className=\"submitBtn\" type=\"button\" onClick={handleLoginClick}>\r\n                {loginBtnText}\r\n              </button>\r\n          ) : (\r\n              <Link to=\"/login\" className=\"link-nav\">\r\n                <button className=\"submitBtn\" type=\"button\">\r\n                  {loginBtnText}\r\n                </button>\r\n              </Link>\r\n          )}\r\n        </nav>\r\n      </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}